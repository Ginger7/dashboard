<!doctype html>
<html class="no-js" lang="ru">

    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Венчурные инвестиции</title>
        <meta content="" name="description">
        <meta content="" name="keywords">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <meta content="telephone=no" name="format-detection">
        <!-- This make sence for mobile browsers. It means, that content has been optimized for mobile browsers -->
        <meta name="HandheldFriendly" content="true">

        <meta property="og:title" content="" />
        <meta property="og:url" content="" />
        <meta property="og:description" content="" />
        <meta property="og:image" content="" />
        <meta property="og:image:type" content="image/jpeg" />
        <meta property="og:image:width" content="500" />
        <meta property="og:image:height" content="300" />
        <meta property="twitter:description" content="" />
        <link rel="image_src" href="" />

        <link rel="icon" type="image/x-icon" href="favicon.ico">
        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
        <link rel="manifest" href="/site.webmanifest">
        <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
        <meta name="msapplication-TileColor" content="#0458fe">
        <meta name="theme-color" content="#ffffff">

        <!-- Google Fonts -->
        <link href="https://fonts.gstatic.com" rel="preconnect">
        <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@200;400;500;600;700&family=Roboto:wght@300;400;500;700;900&display=swap" rel="stylesheet">
        <!-- end Google Fonts -->

        <link href="https://cdn.jsdelivr.net" rel="preconnect">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">
        <link rel="stylesheet" href="static/css/separate-css/jquery.flexdatalist.min.css">
        <!--[if IE 8 ]>
    <link href="static/css/main_ie8.min.css" rel="stylesheet" type="text/css"><![endif]-->
        <!--[if IE 9 ]>
    <link href="static/css/main_ie9.min.css" rel="stylesheet" type="text/css"><![endif]-->
        <!--[if (gt IE 9)|!(IE)]><!-->
        <link href="static/css/main.css" rel="stylesheet" type="text/css">
        <!--<![endif]-->

        <!-- JQuery CDN -->
        <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
        <!-- end JQuery CDN -->

        <script src="static/js/separate-js/jquery.flexdatalist.min.js"></script>
        <!-- Vue.js -->
        <script src="https://cdn.jsdelivr.net/npm/vue@2.6/dist/vue.min.js"></script>
        <!-- end Vue.js -->

        <!-- Chart.js -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
        <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script> -->
        <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
        <!-- <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@0.7.0"></script> -->
        <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-annotation/0.5.7/chartjs-plugin-annotation.js"></script> -->
        <!-- end Chart.js -->

        <script>
            (function (H) {
                H.className = H.className.replace(/\bno-js\b/, 'js')
            })(document.documentElement)
        </script>
        <!--[if lt IE 9 ]>
    <script src="static/js/separate-js/html5shiv-3.7.2.min.js" type="text/javascript"></script>
    <meta content="no" http-equiv="imagetoolbar"><![endif]-->

    </head>

    <body>

        <div class="page">
            <header class="page_hdr header container-fluid">
                <div class="page-hdr_grid">
                    <div class="hdr-menu">
                        <div class="burder-logo">
                            <div class="menu-wrapper">
                                <a class="m-href" href="#">
                                    <img src="static/img/general/h-logo.svg" alt="" width="254">
                                </a>
                            </div>
                            <div class="header-burger">
                                <span></span>
                            </div>
                        </div>
                        <div class="header-menu">
                            <nav>
                                <ul class="header-list">
                                    <li>
                                        <a href="/">Венчурные инвестиции</a>
                                    </li>
                                    <li>
                                        <a href="/exits/">Выходы</a>
                                    </li>
                                    <li>
                                        <a href="/startups/">Таблица сделок</a>
                                    </li>
                                    <li>
                                        <a href="/investments/">Направления инвестиций</a>
                                    </li>
                                    <li>
                                        <a href="/startups/">ESG</a>
                                    </li>
                                    <li>
                                        <a href="/startups/">Аналитические исследования</a>
                                    </li>
                                    <li>
                                        <a href="/about/">О проекте</a>
                                    </li>
                                </ul>
                            </nav>
                            <div class="burger-logo">
                                <a href="#">
                                    <img src="static/img/general/aim-white.svg" alt="" width="122">
                                </a>
                                <a href="#">
                                    <img src="static/img/general/dsight-white.svg" alt="" width="135">
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="hdr-search" id="hdr-search">
                        <form class="input-group">
                            <input type='text' class="header-search form-control" placeholder='Найти компанию или инвестора' list='search' name='search' aria-describedby="search-btn">
                            <button id="search-btn" type="submit"></button>
                        </form>
                    </div>
                    <div class="hdr-lang">
                        <span class="hdr-lang__item active">RU</span>
                        <a href="#" class="hdr-lang__item">EN</a>
                    </div>

                    <div class="hdr-logos">
                        <div class="logo-wrapper">
                            <img src="static/img/general/aim.svg" alt="" width="122">
                        </div>
                        <div class="logo-wrapper">
                            <img src="static/img/general/dsight-white.svg" alt="" width="135">
                        </div>
                    </div>
                </div>
                <script>
                    $(document).ready(function(){
                        $('.header-burger').click(function(event){
                            $('.header-burger, .header-menu').toggleClass('active');
                            $('body').toggleClass('lock');
                        });
                    });
                    $(function () {
                        /* пример файла выдачи  http://projects.sergiodinislopes.pt/flexdatalist/countries.json?relatives%5Bcountry_toggle_multiple_values%5D=166%2C149&selected=&original=&keyword=%3Bkl&contain=false */
                        $('.header-search').flexdatalist({
                            limitOfValues: 10,
                            minLength: 1,
                            searchIn: 'name',
                            valueProperty: '*',
                            selectionRequired: true,
                            //url: "/ajax/header-search/",
                            url: "countries.json",
                            searchByWord: true,
                            noResultsText: '<div class="flexdatalist-noresults">Ничего не найдено</div>',
                        })
                    })
                </script>
            </header>

            <main class="another_grid container-fluid">
                <div class="main-grid">
                    <div class="left-menu">
                        <div class="left-menu">
                            <div class="menu-wrap">
                                <ul class="menu">
                                    <li class="menu-item">
                                        <a class="menu-item-href" href="/">
                                            <svg width="32" height="31" viewBox="0 0 32 31" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M31 11.15V6C31 3.23858 28.7614 1 26 1H6C3.23858 1 1 3.23858 1 6V11.15M31 11.15V25C31 27.7614 28.7614 30 26 30H11M31 11.15H11M1 11.15V25C1 27.7614 3.23858 30 6 30H11M1 11.15H11M11 11.15V30" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                            </svg>
                                        </a> <span>Венчурные инвестиции</span>
                                    </li>
                                    <li class="menu-item">
                                        <a class="menu-item-href" href="/exits/">
                                            <svg width="32" height="31" viewBox="0 0 27 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M4 5L23 5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                                <path d="M1 13L16 13" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                                <path d="M9 21L24 21" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                                <path d="M21 1.5L24.5 5L21 8.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                                <path d="M13 9.5L16.5 13L13 16.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                                <path d="M22 17.5L25.5 21L22 24.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                            </svg>
                                        </a> <span>Выходы</span>
                                    </li>
                                    <li class="menu-item">
                                        <a class="menu-item-href" href="/startups/">
                                            <svg width="32" height="31" viewBox="0 0 32 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M31 1.31384H11M1 1.31384H4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                                <path d="M31 11.1328H11M1 11.1328H4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                                <path d="M31 20.9517H11M1 20.9517H4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                            </svg>
                                        </a> <span>Таблица сделок</span>
                                    </li>
                                    <li class="menu-item">
                                        <a class="menu-item-href" href="/investments/">
                                            <svg width="32" height="31" viewBox="0 0 35 35" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <rect x="1.49121" y="1.72607" width="16.7887" height="16.7887" rx="5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></rect>
                                                <path d="M33.1865 21.7261H26.4912C23.7298 21.7261 21.4912 23.9647 21.4912 26.7261V33.3682" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                                <rect x="8.49121" y="8.72607" width="24.7887" height="24.7887" rx="5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></rect>
                                            </svg>
                                        </a> <span>направления инвестиций</span>
                                    </li>
                                    <li class="menu-item">
                                        <a class="menu-item-href active" href="/startups/">
                                    ESG
                                </a>
                                        <span>ESG</span>
                                    </li>
                                    <li class="menu-item">
                                        <a class="menu-item-href" href="/startups/">
                                            <svg width="39" height="26" viewBox="0 0 39 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M3.50958 22.8053L15.0555 11.2594L21.5814 17.7853L36.1393 3.22748" stroke="#6D798F" stroke-width="2" />
                                                <circle cx="3.58216" cy="22.4645" r="2.40271" fill="#F2F3F6" stroke="#6D798F" stroke-width="2" />
                                                <circle cx="15.0973" cy="11.2296" r="2.40271" fill="#F2F3F6" stroke="#6D798F" stroke-width="2" />
                                                <circle cx="21.9027" cy="17.4767" r="2.40271" fill="#F2F3F6" stroke="#6D798F" stroke-width="2" />
                                                <circle cx="35.5012" cy="3.76856" r="2.40271" fill="#F2F3F6" stroke="#6D798F" stroke-width="2" />
                                            </svg>
                                        </a>
                                        <span>АНАЛИТИКА</span>
                                    </li>
                                    <li class="menu-item">
                                        <a class="menu-item-href" href="/about/" style="height: 69px; padding-top: 28px; width: 72px;">?</a>
                                        <span>О проекте</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="main-grid-right">
                        <div class="main-header mb-2">
                            <div class="title mb-3 pr-4">Венчурные инвестиции: <span>Fintech</span>
                            </div>
                            <div class="main-header-amount mb-3">
                                <div class="main-header-amount__item"><span>354</span> сделки</div>
                                <div class="main-header-amount__item"><span>$50,5</span> млн</div>
                            </div>
                        </div>

                        <div class="graphs-container">
                            <div class="graphs-wrapper flex-fill">
                                <div class="graphs-buttons">
                                    <div class="button-right button-right-select" data-deals-button-row>

                                        <select class="selectpicker graph-select esg" data-filter="esg" title="E/S/G" multiple data-selected-text-format="static">
                                            <option value="Social">Social</option>
                                            <option value="Governance">Governance</option>
                                            <option value="Environmental">Environmental</option>
                                        </select>
                                        <select class="selectpicker graph-select rounds" name="" multiple="multiple" size="4" title="Раунд" data-filter="rounds" data-selected-text-format="static" data-none-selected-text="Не выбрано" data-placement="bottom-center">
                                            <option value="Pre-seed">Pre-seed</option>
                                            <option value="Seed">Seed</option>
                                            <option value="A">A</option>
                                            <option value="B">B</option>
                                            <option value="C+">C+</option>
                                        </select>
                                        <select class="selectpicker graph-select stages" name="" multiple="multiple" size="4" title="Стадия стартапа" data-filter="stages" data-selected-text-format="static" data-none-selected-text="Не выбрано" data-placement="bottom-center">
                                            <option value="Посевная">Посевная</option>
                                            <option value="Ранний рост">Ранний рост</option>
                                            <option value="Расширение">Расширение</option>
                                        </select>
                                        <select class="selectpicker graph-select technologies" name="" multiple="multiple" size="4" title="Технологии" data-filter="technologies" data-selected-text-format="static" data-none-selected-text="Не выбрано" data-placement="bottom-center">
                                            <option value="3D моделирование">3D моделирование</option>
                                            <option value="AR/VR">AR/VR</option>
                                            <option value="BigData">BigData</option>
                                            <option value="Аддитивные технологии">Аддитивные технологии</option>
                                            <option value="Беспилотники">Беспилотники</option>
                                            <option value="Биометрия">Биометрия</option>
                                            <option value="Биотехнологии">Биотехнологии</option>
                                            <option value="Блокчейн">Блокчейн</option>
                                            <option value="Генетические технологии">Генетические технологии</option>
                                            <option value="Зеленые технологии">Зеленые технологии</option>
                                            <option value="Интернет вещей">Интернет вещей</option>
                                            <option value="Искусственный интеллект и машинное обучение">Искусственный интеллект и машинное обучение
                                            </option>
                                            <option value="Квантовые технологии">Квантовые технологии</option>
                                            <option value="Компьютерное зрение">Компьютерное зрение</option>
                                            <option value="Нанотехнологии">Нанотехнологии</option>
                                            <option value="Нейротехнологии">Нейротехнологии</option>
                                            <option value="Новые и портативные источники энергии">Новые и портативные источники энергии</option>
                                            <option value="Новые материалы">Новые материалы</option>
                                            <option value="Робототехника">Робототехника</option>
                                            <option value="Цифровые двойники">Цифровые двойники</option>
                                        </select>
                                        <select class="selectpicker graph-select fund_types" name="" multiple="multiple" size="4" title="Тип инвестора" data-filter="fund_types" data-selected-text-format="static" data-none-selected-text="Не выбрано" data-placement="bottom-center">
                                            <option value="Частные фонды">Частные фонды</option>
                                            <option value="Государственные фонды">Государственные фонды</option>
                                            <option value="Корпоративные фонды">Корпоративные фонды</option>
                                            <option value="Корпоративные инвесторы">Корпоративные инвесторы</option>
                                            <option value="Бизнес-ангелы">Бизнес-ангелы</option>
                                            <option value="Акселераторы">Акселераторы</option>
                                            <option value="Иностранные инвесторы">Иностранные инвесторы</option>
                                        </select>
                                        <select class="selectpicker graph-select customers" name="" multiple="multiple" size="4" title="Бизнес-модель" data-filter="customers" data-selected-text-format="static" data-none-selected-text="Не выбрано" data-placement="bottom-center">
                                            <option value="B2C">B2C</option>
                                            <option value="B2B">B2B</option>
                                            <option value="B2B2C">B2B2C</option>
                                            <option value="B2G">B2G</option>
                                            <option value="P2P">P2P</option>
                                        </select>
                                        <div class="graph-button date-btn">
                                            <span class="date-btn__title">дата сделки</span>
                                            <div class="date">
                                                <p class="date__title">Задайте диапазон (месяц и&nbsp;год):</p>
                                                <div class="date-item">
                                                    <span>От</span>
                                                    <select class="selectpicker select-day" name="" data-filter-period="start-month" data-none-selected-text="Не выбрано">
                                                        <option value="01" selected>01</option>
                                                        <option value="02">02</option>
                                                        <option value="03">03</option>
                                                        <option value="04">04</option>
                                                        <option value="05">05</option>
                                                        <option value="06">06</option>
                                                        <option value="07">07</option>
                                                        <option value="08">08</option>
                                                        <option value="09">09</option>
                                                        <option value="10">10</option>
                                                        <option value="11">11</option>
                                                        <option value="12">12</option>
                                                    </select>
                                                    <select class="selectpicker select-year" name="" data-filter-period="start-year" data-none-selected-text="Не выбрано">
                                                        <option value="2011" selected>2011</option>
                                                        <option value="2012">2012</option>
                                                        <option value="2013">2013</option>
                                                        <option value="2014">2014</option>
                                                        <option value="2015">2015</option>
                                                        <option value="2016">2016</option>
                                                        <option value="2017">2017</option>
                                                        <option value="2018">2018</option>
                                                        <option value="2019">2019</option>
                                                        <option value="2020">2020</option>
                                                        <option value="2021">2021</option>
                                                        <option value="2022">2022</option>
                                                    </select>
                                                </div>
                                                <div class="date-item">
                                                    <span>До</span>
                                                    <select class="selectpicker select-day" name="" data-filter-period="finish-month" data-none-selected-text="Не выбрано">
                                                        <option value="01">01</option>
                                                        <option value="02">02</option>
                                                        <option value="03">03</option>
                                                        <option value="04">04</option>
                                                        <option value="05">05</option>
                                                        <option value="06">06</option>
                                                        <option value="07" selected>07</option>
                                                        <option value="08">08</option>
                                                        <option value="09">09</option>
                                                        <option value="10">10</option>
                                                        <option value="11">11</option>
                                                        <option value="12">12</option>
                                                    </select>
                                                    <select class="selectpicker select-year" name="" data-filter-period="finish-year" data-none-selected-text="Не выбрано">
                                                        <option value="2011">2011</option>
                                                        <option value="2012">2012</option>
                                                        <option value="2013">2013</option>
                                                        <option value="2014">2014</option>
                                                        <option value="2015">2015</option>
                                                        <option value="2016">2016</option>
                                                        <option value="2017">2017</option>
                                                        <option value="2018">2018</option>
                                                        <option value="2019">2019</option>
                                                        <option value="2020">2020</option>
                                                        <option value="2021">2021</option>
                                                        <option value="2022" selected>2022</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="button-left">
                                        <select class="change selectpicker" title="Изменить представление" id="graphs-change">
                                            <option value="month">по месяцам</option>
                                            <option value="quarter">по кварталам</option>
                                            <option value="year">по годам</option>
                                        </select>

                                    </div>

                                </div>
                                <div class="graphs-grid" id="index_graphs">
                                    <div class="py-3 index_graphs_item">
                                        <h4 class="graph-title pl-2">Объем инвестиций</h4>
                                        <div class="chart-graph-line">
                                            <div class="chart-graph-line__container">
                                                <canvas id="volume-bars" width="200" height="250"></canvas>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="py-3 index_graphs_item pl-55">
                                        <h4 class="graph-title pl-2">Количество сделок</h4>
                                        <div class="chart-graph-line">
                                            <div class="chart-graph-line__container">
                                                <canvas id="deals-lines" height="250"></canvas>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <script>
                                var popCanvas = document.getElementById("deals-lines");
                            
                                Chart.defaults.family = "Roboto";
                                Chart.defaults.size = "10";
                            
                                var ctx = popCanvas.getContext('2d');
                            
                                var gradient = ctx.createLinearGradient(0, 0, 0, 400);
                                gradient.addColorStop(0, 'rgba(233, 240, 255, 1');
                                gradient.addColorStop(1, 'rgba(253, 253, 254, 0.65');
                                let responseData = {
                                    "labels": ["2017", "2018", "2019", "2020", "2021", ["янв - июл", "2022"]],
                                    "amounts": ["79.0", "57.7", "176.1", "46.6", "348.1", "11.0"],
                                    "amountMax": "348.1",
                                    "totalAmount": "<span>$718.5</span> млн",
                                    "counts": ["33", "44", "33", "34", "53", "4"],
                                    "countMin": 0,
                                    "countMax": "53",
                                    "totalCount": "<span>201</span> сделка",
                                    "periods": [{"year": "2017", "startMonth": "01", "finishMonth": "12"}, {
                                        "year": "2018",
                                        "startMonth": "01",
                                        "finishMonth": "12"
                                    }, {"year": "2019", "startMonth": "01", "finishMonth": "12"}, {
                                        "year": "2020",
                                        "startMonth": "01",
                                        "finishMonth": "12"
                                    }, {"year": "2021", "startMonth": "01", "finishMonth": "12"}, {
                                        "year": "2022",
                                        "startMonth": "01",
                                        "finishMonth": "07"
                                    }],
                                    "selectedIndex": null
                                }
                                var amountOfDeals = {
                                    labels: responseData.labels,
                                    datasets: [{
                                        type:'line',
                                        data: responseData.amounts,
                                        backgroundColor: gradient,
                                        borderWidth: 4,
                                        cubicInterpolationMode: 'monotone',
                                        borderColor: '#0450FE',
                                        pointBackgroundColor: 'rgba(255, 255, 255, 0)',
                                        pointBorderWidth: 1,
                                        pointBorderColor: 'rgba(255, 255, 255, 0)'
                            
                                    },{
                                        type:'bar',
                                        data: responseData.amounts,
                                        maxBarThickness: 2,
                                        backgroundColor: ['rgba(0,0,0,0.1)', 'rgba(0,0,0,0.1)', 'rgba(0,0,0,0.1)', 'rgba(0,0,0,0.1)', 'rgba(0,0,0,0.1)'],
                                        datalabels: {
                                            display: false
                                        }
                                    }],
                            
                                }
                                let minY = 3;
                                let amountMax = parseInt(responseData.amountMax);
                                let maxY = amountMax >= minY ? amountMax : minY;
                                maxY = Math.ceil(maxY / 3) * 3;
                                let stepSize = Math.round(maxY / 3);
                                var chartOptions = {
                                    plugins: {
                                       // legend: {
                                         //   display: false
                                        //},
                                        datalabels: {
                                            display: function (context) {
                                                let arrDataString = context.dataset.data;
                                                let arrDataInt = [];
                                                arrDataString.forEach(function (elem) {
                                                    arrDataInt.push(Number(elem));
                                                });
                                                let maxVal = Math.max.apply(null, arrDataInt);
                                                let indexMaxVal = arrDataInt.indexOf(maxVal);
                                                return context.dataIndex === indexMaxVal ? maxVal : false;
                                            },
                                            formatter: function (value) {
                                                return value;
                                            },
                                            color: '#fff',
                                            borderRadius: 3,
                                            font: {
                                                size: 10,
                                                family: 'Roboto',
                                                lineHeight: 2.5,
                                                weight: 500
                                            },
                                            padding: {
                                                top: 5,
                                                bottom: 5,
                                                right: 5,
                                                left: 5
                                            },
                                            backgroundColor: '#0450FE',
                                            anchor: 'end',
                                            align: 'end'
                                        }
                                    },
                            
                                    layout: {
                                        padding: {
                                            left: 0,
                                            right: 0,
                                            top: 40,
                                            bottom: 0
                                        }
                                    },
                                    scales: {
                                        x: {
                                            beginAtZero: true,
                                            grid: {
                                                drawBorder: false,
                                                display: false,
                                                zeroLineWidth: 0
                                            },
                                            ticks: {
                                                autoSkip:  $('#graphs-change').val() == 'year' ? $(window).width() > 450 ? false : true : true,
                                                maxRotation: $('#graphs-change').val() == 'year' ? $(window).width() > 450 ? 0 : 25 : 360,
                                                minRotation: 0
                                            }
                                        },
                                        y: {
                                            beginAtZero: true,
                                            min: 0,
                                            //max: responseData.amountMax,
                                            max: parseFloat(responseData.amountMax) > maxY ? maxY + 3 : maxY,
                                            grid: {
                                                display:false,
                                                //zeroLineWidth: 0,
                                                //color: '#CFD6E1',
                                                drawBorder: false
                                            },
                                            ticks: {
                                                display:false,
                                                min: 0,
                                                stepSize: stepSize,
                                            }
                                        }
                                    },  plugins: {
                                      legend: {
                                        display: false
                                    },
                                      datalabels: {
                                        color: 'black',
                                        anchor: 'end',
                                    align: 'end',
                                        display: function(context) {
                                        },
                                        font: {
                                          size:10,
                                          weight: 'normal'
                                        },
                                        padding: {
                                                    top: 0,
                                                    bottom: 5
                                                },
                                        formatter: Math.round
                                      },tooltip: {
                                                position: 'nearest',
                                                enabled: true,
                                                intersect: false,
                                                padding: {
                                                    top: 5,
                                                    left: 10,
                                                    bottom: 5,
                                                    right: 10
                                                },
                                                caretSize: 4,
                                                backgroundColor: '#0450FE',
                                                titleFont: {
                                                    family: 'Roboto',
                                                    size: 10,
                                                    weight: '500',
                                                },
                                                titleColor: '#ffffff',
                                                bodyColor: '#ffffff',
                                                borderColor: '#0450FE',
                                                borderWidth: 4,
                                                callbacks: {
                                                    title: function (tooltipItems) {
                                                        return (Array.isArray(tooltipItems[0].label)
                                                                ? tooltipItems[0].label.join('. ').replace('КВ', 'кв')
                                                                : tooltipItems[0].label
                                                            )
                                                            + '\n$ ' + tooltipItems[0].formattedValue + ' млн';
                                                    },
                                                    label: function () {
                                                        return false;
                                                    },
                                                }
                                            }
                                    }
                                };
                                popCanvas.height = 250;
                            
                                //$('#deals-lines').css('width', 50 * amountOfDeals.labels.length);
                                var lineChart = new Chart(popCanvas, {
                                    type: 'line',
                                    data: amountOfDeals,
                                    options: chartOptions,
                                    plugins: [ChartDataLabels, {
                                        beforeInit: function (Chart) {
                                            Chart.data.labels.forEach(function (e, i, a) {
                                                if (/\n/.test(e)) {
                                                    a[i] = e.split(/\n/);
                                                }
                                            });
                                        }
                                    }]
                                });
                            
                                $('#deals-lines').css('height', 250);
                                let dtdx = document.getElementById('volume-bars').getContext('2d');
                                dtdx.width = 50 * amountOfDeals.labels.length;
                                $('#deals-lines').css('width', 50 * amountOfDeals.labels.length);
                                $('#deals-lines').parents('.chart-graph-line__container').css('width', 50 * amountOfDeals.labels.length);
                                $('#deals-lines').parents('.chart-graph-line__container').css('height', '250');
                                $('#deals-lines').parents('.chart-graph-line__container').scrollLeft(9999999);
                            
                                const isEng = false;
                                const urlLanguage = '';
                                const millions = 'млн';
                                const isExits = false;
                                let barChartGlobal;
                                var barCanvas = document.getElementById("volume-bars");
                            
                                Chart.defaults.family = "Roboto";
                                Chart.defaults.size = "10";
                                Chart.defaults.color = '#6D798F';
                                Chart.defaults.style = '500';
                            
                                var ctx = barCanvas.getContext('2d');
                            
                                var amountOfVolume = {
                                    labels: responseData.labels,
                                    datasets: [{
                                        data: responseData.counts,
                                        backgroundColor: '#0450FE',
                                    }]
                                }
                            
                                let minYBar = responseData.countMin;
                                let amountMaxBar = responseData.countMax;
                                let maxYBar = amountMaxBar >= minYBar ? amountMaxBar : minYBar;
                                maxYBar = Math.ceil(maxYBar / 3) * 3;
                                let stepSizeBar = Math.round(maxYBar / 3);
                            
                                let chartOptionsBar = {
                                    borderSkipped: false,
                                    borderRadius: 10,
                                    barPercentage: 0.1,
                                    plugins: {
                                        legend: {
                                            display: false
                                        },
                                        datalabels: {
                                            display: false,
                                            color: '#000',
                                            font: {
                                                size: 10,
                                                family: 'Roboto',
                                                lineHeight: 2.5,
                                                weight: 500
                                            },
                                            padding: {
                                                top: 0,
                                                bottom: 0
                                            },
                                            backgroundColor: '#fff',
                                            anchor: 'end',
                                            align: 'end'
                                        }
                                    },
                                    // responsive: true,
                            
                                    layout: {
                                        padding: {
                                            left: 0,
                                            right: 0,
                                            top: 18,
                                            bottom: 0
                                        }
                                    },
                                    scales: {
                                        x: {
                            
                                            grid: {
                                                drawBorder: false,
                                                display: false,
                                                zeroLineWidth: 0,
                                            },
                                            ticks: {
                                                autoSkip:  $('#graphs-change').val() == 'year' ? $(window).width() > 450 ? false : true : true,
                                                maxRotation: $('#graphs-change').val() == 'year' ? $(window).width() > 450 ? 0 : 25 : 360,
                                                minRotation: 0
                                            }
                                        },
                            
                                        y: {
                                            grid: {
                                                display:false,
                                                z: 10,
                                                tickMarkLength: 0,
                                                borderColor: '#CFD6E1',
                                                drawBorder: false,
                                            },
                                            ticks: {
                                                display:false,
                                                min: 0,
                                                stepSize: stepSizeBar,
                            
                                                callback: function (value) {
                                                    return '$ ' + value + ' ' + millions;
                                                }
                                            }
                                        }
                                    },plugins: {
                                      legend: {
                                        display: false
                                    },
                                      datalabels: {
                                        color: 'black',
                                        anchor: 'end',
                                    align: 'end',
                                        display: function(context) {
                                        },
                                        padding: {
                                                    top: 0,
                                                    bottom: 5
                                                },
                                        font: {
                                          size:10,
                                          weight: 'normal'
                                        },
                                        formatter: Math.round
                                      },tooltip: {
                                                position: 'nearest',
                                                enabled: true,
                                                intersect: false,
                                                padding: {
                                                    top: 5,
                                                    left: 10,
                                                    bottom: 5,
                                                    right: 10
                                                },
                                                caretSize: 4,
                                                backgroundColor: '#0450FE',
                                                titleFont: {
                                                    family: 'Roboto',
                                                    size: 10,
                                                    weight: '500',
                                                },
                                                titleColor: '#ffffff',
                                                bodyColor: '#ffffff',
                                                borderColor: '#0450FE',
                                                borderWidth: 4,
                                                callbacks: {
                                                    title: function (tooltipItems) {
                                                        return (Array.isArray(tooltipItems[0].label)
                                                                ? tooltipItems[0].label.join('. ').replace('КВ', 'кв')
                                                                : tooltipItems[0].label
                                                            )
                                                            + '\n$ ' + tooltipItems[0].formattedValue + ' млн';
                                                    },
                                                    label: function () {
                                                        return false;
                                                    },
                                                }
                                            }
                                    }
                                }
                            
                            
                                let ivdx = document.getElementById('volume-bars').getContext('2d');
                            
                                var barChart = new Chart(ctx, {
                                    type: 'bar',
                                    data: amountOfVolume,
                                    options: chartOptionsBar,
                                    plugins: [ChartDataLabels, {
                                        beforeInit: function (Chart) {
                                            Chart.data.labels.forEach(function (e, i, a) {
                                                if (/\n/.test(e)) {
                                                    a[i] = e.split(/\n/);
                                                }
                                            });
                                        }
                                    }]
                            
                                })
                            
                                $('#volume-bars').css('height', 250);
                                let vtdx = document.getElementById('volume-bars').getContext('2d');
                                vtdx.width = 50 * amountOfDeals.labels.length;
                                $('#volume-bars').css('width', 50 * amountOfDeals.labels.length);
                                $('#volume-bars').parents('.chart-graph-line__container').css('width', 50 * amountOfDeals.labels.length);
                                $('#volume-bars').parents('.chart-graph-line__container').css('height', '250');
                                $('#volume-bars').parents('.chart-graph-line__container').scrollLeft(9999999);
                            
                                $('#graphs-change').change(function () {
                                    switch ($(this).val()) {
                                        case 'year':
                                            responseData = {
                                                "labels": ["2017", "2018", "2019", "2020", "2021", ["янв - июл", "2022"]],
                                                "amounts": ["79.0", "57.7", "176.1", "46.6", "348.1", "11.0"],
                                                "amountMax": "348.1",
                                                "totalAmount": "<span>$718.5</span> млн",
                                                "counts": ["33", "44", "33", "34", "53", "4"],
                                                "countMin": 0,
                                                "countMax": "53",
                                                "totalCount": "<span>201</span> сделка",
                                                "periods": [{"year": "2017", "startMonth": "01", "finishMonth": "12"}, {
                                                    "year": "2018",
                                                    "startMonth": "01",
                                                    "finishMonth": "12"
                                                }, {"year": "2019", "startMonth": "01", "finishMonth": "12"}, {
                                                    "year": "2020",
                                                    "startMonth": "01",
                                                    "finishMonth": "12"
                                                }, {"year": "2021", "startMonth": "01", "finishMonth": "12"}, {
                                                    "year": "2022",
                                                    "startMonth": "01",
                                                    "finishMonth": "07"
                                                }],
                                                "selectedIndex": null
                                            }
                                            break
                                        case 'quarter':
                                            responseData = {
                                                "labels": [["I кв", "2017"], ["II кв", "2017"], ["III кв", "2017"], ["IV кв", "2017"], ["I кв", "2018"], ["II кв", "2018"], ["III кв", "2018"], ["IV кв", "2018"], ["I кв", "2019"], ["II кв", "2019"], ["III кв", "2019"], ["IV кв", "2019"], ["I кв", "2020"], ["II кв", "2020"], ["III кв", "2020"], ["IV кв", "2020"], ["I кв", "2021"], ["II кв", "2021"], ["III кв", "2021"], ["IV кв", "2021"], ["I кв", "2022"], ["II кв", "2022"], ["III кв", "2022"]],
                                                "amounts":["0", "0", "1", "0", "0"], //["5.8", "16.4", "5.4", "51.4", "14.5", "12.1", "18.9", "12.2", "7.8", "9.5", "151.2", "7.6", "3.7", "13.1", "22.7", "7.1", "48.1", "277.9", "15.4", "6.7", "11.0", "0", "0"],
                                                "amountMax": "0",
                                                "totalAmount": "<span>$718.5</span> млн",
                                                "counts": ["6", "13", "5", "9", "11", "9", "12", "12", "8", "7", "5", "13", "7", "7", "10", "10", "16", "9", "17", "11", "4", "0", "0"],
                                                "countMin": 0,
                                                "countMax": "17",
                                                "totalCount": "<span>201</span> сделка",
                                                "periods": [{"year": "2017", "startMonth": "01", "finishMonth": "03"}, {
                                                    "year": "2017",
                                                    "startMonth": "04",
                                                    "finishMonth": "06"
                                                }, {"year": "2017", "startMonth": "07", "finishMonth": "09"}, {
                                                    "year": "2017",
                                                    "startMonth": "10",
                                                    "finishMonth": "12"
                                                }, {"year": "2018", "startMonth": "01", "finishMonth": "03"}, {
                                                    "year": "2018",
                                                    "startMonth": "04",
                                                    "finishMonth": "06"
                                                }, {"year": "2018", "startMonth": "07", "finishMonth": "09"}, {
                                                    "year": "2018",
                                                    "startMonth": "10",
                                                    "finishMonth": "12"
                                                }, {"year": "2019", "startMonth": "01", "finishMonth": "03"}, {
                                                    "year": "2019",
                                                    "startMonth": "04",
                                                    "finishMonth": "06"
                                                }, {"year": "2019", "startMonth": "07", "finishMonth": "09"}, {
                                                    "year": "2019",
                                                    "startMonth": "10",
                                                    "finishMonth": "12"
                                                }, {"year": "2020", "startMonth": "01", "finishMonth": "03"}, {
                                                    "year": "2020",
                                                    "startMonth": "04",
                                                    "finishMonth": "06"
                                                }, {"year": "2020", "startMonth": "07", "finishMonth": "09"}, {
                                                    "year": "2020",
                                                    "startMonth": "10",
                                                    "finishMonth": "12"
                                                }, {"year": "2021", "startMonth": "01", "finishMonth": "03"}, {
                                                    "year": "2021",
                                                    "startMonth": "04",
                                                    "finishMonth": "06"
                                                }, {"year": "2021", "startMonth": "07", "finishMonth": "09"}, {
                                                    "year": "2021",
                                                    "startMonth": "10",
                                                    "finishMonth": "12"
                                                }, {"year": "2022", "startMonth": "01", "finishMonth": "03"}, {
                                                    "year": "2022",
                                                    "startMonth": "04",
                                                    "finishMonth": "06"
                                                }, {"year": "2022", "startMonth": "07", "finishMonth": "07"}],
                                                "selectedIndex": null
                                            }
                                            break
                                        case 'month':
                                            responseData = {
                                                "labels": [["янв", "2017"], ["фев", "2017"], ["мар", "2017"], ["апр", "2017"], ["май", "2017"], ["июн", "2017"], ["июл", "2017"], ["авг", "2017"], ["сен", "2017"], ["окт", "2017"], ["ноя", "2017"], ["дек", "2017"], ["янв", "2018"], ["фев", "2018"], ["мар", "2018"], ["апр", "2018"], ["май", "2018"], ["июн", "2018"], ["июл", "2018"], ["авг", "2018"], ["сен", "2018"], ["окт", "2018"], ["ноя", "2018"], ["дек", "2018"], ["янв", "2019"], ["фев", "2019"], ["мар", "2019"], ["апр", "2019"], ["май", "2019"], ["июн", "2019"], ["июл", "2019"], ["авг", "2019"], ["сен", "2019"], ["окт", "2019"], ["ноя", "2019"], ["дек", "2019"], ["янв", "2020"], ["фев", "2020"], ["мар", "2020"], ["апр", "2020"], ["май", "2020"], ["июн", "2020"], ["июл", "2020"], ["авг", "2020"], ["сен", "2020"], ["окт", "2020"], ["ноя", "2020"], ["дек", "2020"], ["янв", "2021"], ["фев", "2021"], ["мар", "2021"], ["апр", "2021"], ["май", "2021"], ["июн", "2021"], ["июл", "2021"], ["авг", "2021"], ["сен", "2021"], ["окт", "2021"], ["ноя", "2021"], ["дек", "2021"], ["янв", "2022"], ["фев", "2022"], ["мар", "2022"], ["апр", "2022"], ["май", "2022"], ["июн", "2022"], ["июл", "2022"]],
                                                "amounts": ["1.6", "0.5", "3.7", "7.1", "0.1", "9.1", "5.3", "0", "0.1", "22.6", "8.8", "20.0", "10.4", "4.1", "0", "6.1", "1.8", "4.1", "3.9", "13.1", "1.8", "9.1", "0.2", "2.9", "1.6", "6.1", "0.1", "3.0", "1.5", "5.0", "0", "3.1", "148.1", "3.1", "0.4", "4.1", "3.0", "0.2", "0.5", "0.5", "9.8", "2.8", "20.4", "1.5", "0.8", "4.5", "1.0", "1.6", "13.3", "27.7", "7.1", "0", "250.8", "27.1", "5.0", "4.3", "6.1", "0.9", "1.5", "4.3", "4.2", "6.9", "0", "0", "0", "0", "0"],
                                                "amountMax": "250.8",
                                                "totalAmount": "<span>$718.3</span> млн",
                                                "counts": ["3", "1", "2", "1", "2", "10", "3", "0", "2", "5", "3", "1", "7", "4", "0", "3", "2", "4", "3", "4", "5", "7", "1", "4", "1", "6", "1", "1", "1", "5", "0", "2", "3", "3", "2", "8", "2", "1", "4", "1", "2", "4", "4", "3", "3", "2", "5", "3", "3", "5", "8", "0", "4", "5", "6", "6", "5", "2", "6", "3", "2", "2", "0", "0", "0", "0", "0"],
                                                "countMin": 0,
                                                "countMax": "10",
                                                "totalCount": "<span>201</span> сделка",
                                                "periods": [{"year": "2017", "startMonth": "01", "finishMonth": "01"}, {
                                                    "year": "2017",
                                                    "startMonth": "02",
                                                    "finishMonth": "02"
                                                }, {"year": "2017", "startMonth": "03", "finishMonth": "03"}, {
                                                    "year": "2017",
                                                    "startMonth": "04",
                                                    "finishMonth": "04"
                                                }, {"year": "2017", "startMonth": "05", "finishMonth": "05"}, {
                                                    "year": "2017",
                                                    "startMonth": "06",
                                                    "finishMonth": "06"
                                                }, {"year": "2017", "startMonth": "07", "finishMonth": "07"}, {
                                                    "year": "2017",
                                                    "startMonth": "08",
                                                    "finishMonth": "08"
                                                }, {"year": "2017", "startMonth": "09", "finishMonth": "09"}, {
                                                    "year": "2017",
                                                    "startMonth": "10",
                                                    "finishMonth": "10"
                                                }, {"year": "2017", "startMonth": "11", "finishMonth": "11"}, {
                                                    "year": "2017",
                                                    "startMonth": "12",
                                                    "finishMonth": "12"
                                                }, {"year": "2018", "startMonth": "01", "finishMonth": "01"}, {
                                                    "year": "2018",
                                                    "startMonth": "02",
                                                    "finishMonth": "02"
                                                }, {"year": "2018", "startMonth": "03", "finishMonth": "03"}, {
                                                    "year": "2018",
                                                    "startMonth": "04",
                                                    "finishMonth": "04"
                                                }, {"year": "2018", "startMonth": "05", "finishMonth": "05"}, {
                                                    "year": "2018",
                                                    "startMonth": "06",
                                                    "finishMonth": "06"
                                                }, {"year": "2018", "startMonth": "07", "finishMonth": "07"}, {
                                                    "year": "2018",
                                                    "startMonth": "08",
                                                    "finishMonth": "08"
                                                }, {"year": "2018", "startMonth": "09", "finishMonth": "09"}, {
                                                    "year": "2018",
                                                    "startMonth": "10",
                                                    "finishMonth": "10"
                                                }, {"year": "2018", "startMonth": "11", "finishMonth": "11"}, {
                                                    "year": "2018",
                                                    "startMonth": "12",
                                                    "finishMonth": "12"
                                                }, {"year": "2019", "startMonth": "01", "finishMonth": "01"}, {
                                                    "year": "2019",
                                                    "startMonth": "02",
                                                    "finishMonth": "02"
                                                }, {"year": "2019", "startMonth": "03", "finishMonth": "03"}, {
                                                    "year": "2019",
                                                    "startMonth": "04",
                                                    "finishMonth": "04"
                                                }, {"year": "2019", "startMonth": "05", "finishMonth": "05"}, {
                                                    "year": "2019",
                                                    "startMonth": "06",
                                                    "finishMonth": "06"
                                                }, {"year": "2019", "startMonth": "07", "finishMonth": "07"}, {
                                                    "year": "2019",
                                                    "startMonth": "08",
                                                    "finishMonth": "08"
                                                }, {"year": "2019", "startMonth": "09", "finishMonth": "09"}, {
                                                    "year": "2019",
                                                    "startMonth": "10",
                                                    "finishMonth": "10"
                                                }, {"year": "2019", "startMonth": "11", "finishMonth": "11"}, {
                                                    "year": "2019",
                                                    "startMonth": "12",
                                                    "finishMonth": "12"
                                                }, {"year": "2020", "startMonth": "01", "finishMonth": "01"}, {
                                                    "year": "2020",
                                                    "startMonth": "02",
                                                    "finishMonth": "02"
                                                }, {"year": "2020", "startMonth": "03", "finishMonth": "03"}, {
                                                    "year": "2020",
                                                    "startMonth": "04",
                                                    "finishMonth": "04"
                                                }, {"year": "2020", "startMonth": "05", "finishMonth": "05"}, {
                                                    "year": "2020",
                                                    "startMonth": "06",
                                                    "finishMonth": "06"
                                                }, {"year": "2020", "startMonth": "07", "finishMonth": "07"}, {
                                                    "year": "2020",
                                                    "startMonth": "08",
                                                    "finishMonth": "08"
                                                }, {"year": "2020", "startMonth": "09", "finishMonth": "09"}, {
                                                    "year": "2020",
                                                    "startMonth": "10",
                                                    "finishMonth": "10"
                                                }, {"year": "2020", "startMonth": "11", "finishMonth": "11"}, {
                                                    "year": "2020",
                                                    "startMonth": "12",
                                                    "finishMonth": "12"
                                                }, {"year": "2021", "startMonth": "01", "finishMonth": "01"}, {
                                                    "year": "2021",
                                                    "startMonth": "02",
                                                    "finishMonth": "02"
                                                }, {"year": "2021", "startMonth": "03", "finishMonth": "03"}, {
                                                    "year": "2021",
                                                    "startMonth": "04",
                                                    "finishMonth": "04"
                                                }, {"year": "2021", "startMonth": "05", "finishMonth": "05"}, {
                                                    "year": "2021",
                                                    "startMonth": "06",
                                                    "finishMonth": "06"
                                                }, {"year": "2021", "startMonth": "07", "finishMonth": "07"}, {
                                                    "year": "2021",
                                                    "startMonth": "08",
                                                    "finishMonth": "08"
                                                }, {"year": "2021", "startMonth": "09", "finishMonth": "09"}, {
                                                    "year": "2021",
                                                    "startMonth": "10",
                                                    "finishMonth": "10"
                                                }, {"year": "2021", "startMonth": "11", "finishMonth": "11"}, {
                                                    "year": "2021",
                                                    "startMonth": "12",
                                                    "finishMonth": "12"
                                                }, {"year": "2022", "startMonth": "01", "finishMonth": "01"}, {
                                                    "year": "2022",
                                                    "startMonth": "02",
                                                    "finishMonth": "02"
                                                }, {"year": "2022", "startMonth": "03", "finishMonth": "03"}, {
                                                    "year": "2022",
                                                    "startMonth": "04",
                                                    "finishMonth": "04"
                                                }, {"year": "2022", "startMonth": "05", "finishMonth": "05"}, {
                                                    "year": "2022",
                                                    "startMonth": "06",
                                                    "finishMonth": "06"
                                                }, {"year": "2022", "startMonth": "07", "finishMonth": "07"}],
                                                "selectedIndex": null
                                            }
                                            break
                                    }
                                    amountOfDeals = {
                                        labels: responseData.labels,
                                        datasets: [{
                                            type: 'line',
                                            data: responseData.amounts,
                                            backgroundColor: gradient,
                                            borderWidth: 3,
                                            cubicInterpolationMode: 'monotone',
                                            borderColor: '#0450FE',
                                            pointBackgroundColor: 'rgba(255, 255, 255, 0)',
                                            pointBorderWidth: 1,
                                            pointBorderColor: 'rgba(255, 255, 255, 0)'
                            
                                        },{
                                        type:'bar',
                                        data: responseData.amounts,
                                        maxBarThickness: 2,
                                        backgroundColor: ['rgba(0,0,0,0.1)', 'rgba(0,0,0,0.1)', 'rgba(0,0,0,0.1)', 'rgba(0,0,0,0.1)', 'rgba(0,0,0,0.1)'],
                                        datalabels: {
                                            display: false
                                        }
                                    }],
                            
                                    }
                                    amountMax = parseInt(responseData.amountMax);
                                    maxY = amountMax >= minY ? amountMax : minY;
                                    maxY = Math.ceil(maxY / 3) * 3;
                                    stepSize = Math.round(maxY / 3);
                                    lineChart.options.scales.y.max = parseFloat(responseData.amountMax) > maxY ? maxY + 3 : maxY
                                    lineChart.options.scales.y.ticks.stepSize = stepSize
                            
                                    lineChart.data.labels = amountOfDeals.labels;
                                    lineChart.data.datasets = amountOfDeals.datasets;
                            
                            
                                    $('#deals-lines').css('height', 250);
                                    let ctdx = document.getElementById('volume-bars').getContext('2d');
                                    ctdx.width = 50 * amountOfDeals.labels.length;
                                    $('#deals-lines').css('width', 50 * amountOfDeals.labels.length);
                                    $('#deals-lines').parents('.chart-graph-line__container').css('width', 50 * amountOfDeals.labels.length);
                                    $('#deals-lines').parents('.chart-graph-line__container').css('height', '250');
                                    $('#deals-lines').parents('.chart-graph-line__container').scrollLeft(9999999);
                            
                            
                                    lineChart.update();
                                    lineChart.resize();
                            
                            
                            
                                    amountOfVolume = {
                                        labels: responseData.labels,
                                        datasets: [{
                                            data: responseData.counts,
                                            backgroundColor: '#0450FE',
                                        }]
                                    }
                                    minYBar = responseData.countMin;
                                    ///МБ ТУТ
                                    amountMaxBar = responseData.countMax;
                                    maxYBar = amountMaxBar >= minYBar ? amountMaxBar : minYBar;
                                    maxYBar = Math.ceil(maxYBar / 3) * 3;
                                    stepSizeBar = Math.round(maxYBar / 3);
                            
                                    barChart.options.scales.y.ticks.stepSize = stepSizeBar
                                    barChart.data.labels = amountOfVolume.labels;
                                    barChart.data.datasets = amountOfVolume.datasets;
                            
                                    $('#volume-bars').css('height', 250);
                                    let vtdx = document.getElementById('volume-bars').getContext('2d');
                                    vtdx.width = 50 * amountOfDeals.labels.length;
                                    $('#volume-bars').css('width', 50 * amountOfDeals.labels.length);
                                    $('#volume-bars').parents('.chart-graph-line__container').css('width', 50 * amountOfDeals.labels.length);
                                    $('#volume-bars').parents('.chart-graph-line__container').css('height', '250');
                                    $('#volume-bars').parents('.chart-graph-line__container').scrollLeft(9999999);
                            
                                    barChart.update();
                                    barChart.resize();
                            
                            
                                });
                            </script>
                        </div>
                        <div class="catalog-container" id="catalog-app">

                            <div class="deals_active-filters_row form-row">
                                <div class="col-auto my-1" v-for="activeFilter in filtersRow" v-cloak>
                                    <button type="button" class="btn btn-sm btn-secondary" @click="removeFilter(activeFilter)" :data-filter="activeFilter.name">
                                        [[activeFilter.val]]
                                        <i class="catalog_active-filters_remove ml-3"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="cat_layout">
                                <div class="buton">
                                    <button class="filter-btn"><i class="fas fa-chevron-down"></i>
                                    </button>
                                </div>
                                <div class="add-columns">
                                    <div class="a-c-body">
                                        <div class="item-column">
                                            <input type="checkbox" name="checkbox" id="description" checked v-model="rows.description">
                                            <label for="description">Описание</label>
                                        </div>
                                        <div class="item-column">
                                            <input type="checkbox" name="checkbox" id="site" v-model="rows.startup_stage">
                                            <label for="site">Стадия стартапа</label>
                                        </div>
                                        <div class="item-column">
                                            <input type="checkbox" name="checkbox" id="direction" v-model="rows.market_niche">
                                            <label for="direction">Рыночная ниша</label>
                                        </div>
                                        <div class="item-column">
                                            <input type="checkbox" name="checkbox" id="startup" v-model="rows.technology">
                                            <label for="startup">Технологии</label>
                                        </div>
                                        <div class="item-column">
                                            <input type="checkbox" name="checkbox" id="partition" checked v-model="rows.date">
                                            <label for="partition">Дата сделки</label>
                                        </div>
                                        <div class="item-column">
                                            <input type="checkbox" name="checkbox" id="format" checked v-model="rows.investment_size">
                                            <label for="format">Объем инвестиций</label>
                                        </div>
                                        <div class="item-column">
                                            <input type="checkbox" name="checkbox" id="operator" checked v-model="rows.round">
                                            <label for="operator">Раунд</label>
                                        </div>
                                        <div class="item-column">
                                            <input type="checkbox" name="checkbox" id="address" checked v-model="rows.investor">
                                            <label for="address">Инвестор</label>
                                        </div>
                                        <div class="item-column">
                                            <input type="checkbox" name="checkbox" id="typeinv" v-model="rows.typeinv">
                                            <label for="typeinv">Тип инвестора</label>
                                        </div>
                                        <div class="item-column">
                                            <input type="checkbox" name="checkbox" id="customers" v-model="rows.customers">
                                            <label for="customers">Пользователи продукта</label>
                                        </div>
                                        <div class="item-column">
                                            <input type="checkbox" name="checkbox" id="siteofcompany" v-model="rows.siteofcompany">
                                            <label for="siteofcompany">Сайт компании</label>
                                        </div>
                                    </div>
                                </div>

                                <div class="cat_main" id="doublescroll">
                                    <div class="catalog-list">
                                        <div class="catalog-title cat-title-deals">
                                            <div data-table-col="title">Компания</div>
                                            <div data-table-col="description" v-if="this.rows.description">Описание</div>
                                            <div class="sort active" v-bind:class="[this.sortArrow == 'up' ? 'up' : 'down']" data-table-col="date" v-if="this.rows.date">Дата</div>
                                            <div class="sort active" v-bind:class="[this.sortArrow == 'up' ? 'up' : 'down']" data-table-col="investment_size" v-if="this.rows.investment_size">Объем
                                                <br>инвестиций
                                            </div>
                                            <div data-table-col="round" v-if="this.rows.round">Раунд</div>
                                            <div data-table-col="investor" v-if="this.rows.investor">Инвестор</div>
                                            <div data-table-col="startup_stage" v-if="this.rows.startup_stage">Стадия
                                                <br>стартапа</div>
                                            <div data-table-col="market_niche" v-if="this.rows.market_niche">Рыночная ниша</div>
                                            <div data-table-col="technology" v-if="this.rows.technology">Технологии</div>
                                            <div data-table-col="typeinv" v-if="this.rows.typeinv">Тип инвестора</div>
                                            <div data-table-col="customers" v-if="this.rows.customers">Пользователи
                                                <br>продукта</div>
                                            <div data-table-col="siteofcompany" v-if="this.rows.siteofcompany">Сайт компании</div>
                                        </div>
                                        <template v-if="cat_items_sorted.length">
                                            <div is="cat-item" :itemdata="item" v-for="(item, idx) in cat_items_sorted" :key="item.id"></div>
                                        </template>
                                        <template v-else>
                                            <p class="text-muted h5 my-6">Ничего не найдено</p>
                                        </template>
                                    </div>
                                </div>
                            </div>
                            <div class="cat-pagination">
                                <div class="prev">
                                    <a href="#">Предыдущая</a>
                                </div>
                                <div class="pages">
                                    <a href="#" class="active">1</a>
                                    <a href="#">2</a>
                                    <a href="#">3</a>
                                    <a href="#">4</a>
                                    <a href="#" class="no-border">...</a>
                                    <a href="#">5</a>
                                </div>
                                <div class="next">
                                    <a href="#">Следующая</a>
                                </div>
                            </div>
                        </div>

                        <style>
                            @media screen and (min-width: 768px) {
                                .catalog-list [data-table-col="title"] {
                                    flex: 0 0 15vw;
                                    min-width: 15rem;
                                }
        
                                .catalog-list [data-table-col="description"] {
                                    flex: 0 0 22vw;
                                    min-width: 20rem;
                                }
        
                                .catalog-list [data-table-col="date"] {
                                    flex: 0 0 8vw;
                                }
        
                                .catalog-list [data-table-col="investment_size"] {
                                    flex: 0 0 8vw;
                                }
        
                                .catalog-list [data-table-col="round"] {
                                    flex: 0 0 6vw;
                                }
        
                                .catalog-list [data-table-col="investor"] {
                                    flex: 0 0 12vw;
                                }
        
                                .catalog-list [data-table-col="startup_stage"] {
                                    flex: 0 0 8vw;
                                }
        
                                .catalog-list [data-table-col="market_niche"] {
                                    flex: 0 0 8vw;
                                }
        
                                .catalog-list [data-table-col="technology"] {
                                    flex: 0 0 10vw;
                                }
        
                                .catalog-list [data-table-col="typeinv"] {
                                    flex: 0 0 10vw;
                                }
        
                                .catalog-list [data-table-col="customers"] {
                                    flex: 0 0 8vw;
                                }
        
                                .catalog-list [data-table-col="siteofcompany"] {
                                    flex: 0 0 10vw;
                                }
                            }
        
                            @media screen and (min-width: 1600px) {
                                .catalog-list [data-table-col="title"] {
                                    flex: 0 0 15rem;
                                }
        
                                .catalog-list [data-table-col="description"] {
                                    flex: 0 0 22rem;
                                }
        
                                .catalog-list [data-table-col="date"] {
                                    flex: 0 0 8rem;
                                }
        
                                .catalog-list [data-table-col="investment_size"] {
                                    flex: 0 0 8rem;
                                }
        
                                .catalog-list [data-table-col="round"] {
                                    flex: 0 0 6rem;
                                }
        
                                .catalog-list [data-table-col="investor"] {
                                    flex: 0 0 12rem;
                                }
        
                                .catalog-list [data-table-col="startup_stage"] {
                                    flex: 0 0 8rem;
                                }
        
                                .catalog-list [data-table-col="market_niche"] {
                                    flex: 0 0 8rem;
                                }
        
                                .catalog-list [data-table-col="technology"] {
                                    flex: 0 0 10rem;
                                }
        
                                .catalog-list [data-table-col="typeinv"] {
                                    flex: 0 0 10rem;
                                }
        
                                .catalog-list [data-table-col="customers"] {
                                    flex: 0 0 8rem;
                                }
        
                                .catalog-list [data-table-col="siteofcompany"] {
                                    flex: 0 0 10rem;
                                }
                            }
                        </style>

                    </div>
                </div>
            </main>


        </div>

        <footer class="page__footer container-fluid">
            <div class="footer">
                <div class="row footer-desc">
                    <div class="logo-wrapper col-lg-2 col-md-4">
                        <a href="#" target="_blank">
                            <img src="static/img/content/deals/aim.svg" alt="">
                        </a>
                    </div>
                    <div class="menu-item col-lg-2 col-md-4">
                        <a href="#" class="menu-item-href" target="_blank">
                            <img src="static/img/content/deals/mik.svg" alt="">
                        </a>
                    </div>
                    <div class="menu-item col-lg-3 col-md-4">
                        <a href="#" class="menu-item-href" target="_blank">
                            <img src="static/img/content/deals/sg.svg" alt="">
                        </a>
                    </div>
                    <div class="menu-item footer-text offset-col-lg-1 col-lg-4 col-md-6">
                        <p>Нашли опечатку? Выделите текст и&nbsp;нажмите <span class="text-white text-nowrap">CTRL + ENTER</span>
                        </p>
                        <p>Нашли ошибку, есть вопросы или хотите добавить информацию в&nbsp;дэшборд, напишите нам <a href="mailto:research@develop.mos.ru">research@develop.mos.ru</a>
                        </p>
                    </div>
                </div>
                <div class="footer-mobile d-lg-none d-md-none d-sm-block">
                    <div class="footer-title">Полезные ссылки</div>
                    <div class="footer-href">
                        <a href="/">Венчурные инвестиции</a>
                        <a href="/exits/">Выходы</a>
                        <a href="/startups/">Таблица сделок</a>
                        <a href="/investments/">Направления инвестиций</a>
                        <a href="/startups/">ESG</a>
                        <a href="/startups/">Аналитические исследования</a>
                        <a href="/about/">О проекте</a>
                    </div>
                    <div class="footer-title">Контакты</div>
                    <div class="footer-href">
                        <a href="mailto:research@develop.mos.ru">research@develop.mos.ru</a>
                    </div>
                    <p>ГБУ «Агенство инноваций Москвы», 2022</p>
                </div>
            </div>
        </footer>

        <script src="static/js/separate-js/svg4everybody.min.js"></script>
        <script>
            svg4everybody();
        </script>

        <!-- Main scripts. You can replace it, but I recommend you to leave it here     -->
        <script src="static/js/main.min.js"></script>
        <!-- START - Регистрация компонентов vue -->
        <script type="text/template" id="cat-item_tpl">
            <article>
                <a :href="itemdata.link" class="catalog-item cat-item-deals" :title="itemdata.title">
                    <div data-table-col="title" class="catalog-item__title" data-label="Компания">
                        <div class="logo-wrapper">
                            <img :src="itemdata.img" :alt="itemdata.title">
                        </div>
                        <span class="comp-title" v-html="itemdata.comptitle"></span>
                    </div>
                    <div data-table-col="description" v-html="itemdata.description" class="catalog-item__desc"
                         data-label="Описание" v-if="this.$root.rows.description"></div>
                    <div data-table-col="date" v-html="itemdata.year" class="catalog-item__year" data-label="Дата"
                         v-if="this.$root.rows.date"></div>
                    <div data-table-col="investment_size" v-html="'$ ' + [[numberWithSpaces(itemdata.volume)]]"
                         data-label="Объем инвестиций" v-if="this.$root.rows.investment_size"></div>
                    <div data-table-col="round" v-html="itemdata.stage" class="catalog-item__stage" data-label="Раунд"
                         v-if="this.$root.rows.round"></div>
                    <div data-table-col="investor" v-html="itemdata.investor" data-label="Инвестор"
                         v-if="this.$root.rows.investor"></div>
                    <div data-table-col="startup_stage" v-html="itemdata.stadia" data-label="Стадия"
                         v-if="this.$root.rows.startup_stage"></div>
                    <div data-table-col="market_niche" v-html="itemdata.market_niche" data-label="Рыночная ниша"
                         v-if="this.$root.rows.market_niche"></div>
                    <div data-table-col="technology" v-html="itemdata.technology" data-label="Технологии"
                         v-if="this.$root.rows.technology"></div>
                    <div data-table-col="typeinv" v-html="itemdata.typeinv" data-label="Тип инвестора"
                         v-if="this.$root.rows.typeinv"></div>
                    <div data-table-col="customers" v-html="itemdata.customers" data-label="Пользователи продукта"
                         v-if="this.$root.rows.customers"></div>
                    <div data-table-col="siteofcompany" v-html="itemdata.siteofcompany" data-label="Сайт компании"
                         v-if="this.$root.rows.siteofcompany"></div>
                </a>
        
        
            </article>
        </script>

        <script type="text/javascript">
            Vue.component('cat-item', {
                template: '#cat-item_tpl',
                delimiters: ['[[', ']]'],
                props: {
                    itemdata: Object,
                },
                data: function () {
                    return {}
                },
        
                methods: {
                    numberWithSpaces: function (x) {
                        return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ");
                    }
                }
            });
        </script>
        <!-- END - Регистрация компонентов vue -->

        <script>
            let SC_catalog_data = {
                rows: {
                    company: 'true',
                    description: 'true',
                    date: 'true',
                    investment_size: 'true',
                    round: 'true',
                    investor: 'true',
                    startup_stage: '',
                    market_niche: '',
                    technology: '',
                    typeinv: '',
                    customers: '',
                    siteofcompany: ''
                },
                filter: {
                    market: '',
                    stage: '',
                    size: '',
                    age: '',
                    gain: '',
                    count: ''
                },
                sortParam: '',
                sortArrow: 'up',
                cat_items: [
                    {
                        img: 'static/img/content/deals/infometeoservice.jpg',
                        comptitle: 'FinSight',
                        description: 'Онлайн-сервис для занятий с профессиональными репетиторами.',
                        investor: 'BonAngels',
                        invtype: 'Бизнес-ангелы',
                        volume: '$ 1 500 000',
                        stage: 'А',
                        year: 'Январь 2020',
                        stadia: 'Посевная'
                    },
                    {
                        img: 'static/img/content/deals/logored.png',
                        comptitle: 'Сбербанк',
                        description: 'Сервис продажи подержанных автомобилей.',
                        investor: 'Нuman Digital Capital',
                        invtype: 'Корпоративный инвестор',
                        volume: '$ 600 000',
                        stage: 'Seed',
                        year: 'Январь 2020',
                        stadia: 'Посевная'
                    },
                    {
                        img: 'static/img/content/deals/kalancha.png',
                        comptitle: 'Яндекс',
                        description: 'Сервис продажи подержанных автомобилей.',
                        investor: 'Нuman Digital Capital',
                        invtype: 'Корпоративный инвестор',
                        volume: '$ 600 000',
                        stage: 'Seed',
                        year: 'Январь 2020',
                        stadia: 'Посевная'
                    }
                ]
            };
        </script>
        <script>
            $(function () {
                new Vue({
                    el: '#catalog-app',
                    delimiters: ['[[', ']]'],
        
                    data: $.extend({
                        isLoading: true,
        
                    }, SC_catalog_data),
        
                    computed: {
                        cat_items_sorted: function () {
                            switch (this.sortParam) {
                                case 'year':
                                    switch (this.sortArrow) {
                                        case 'down':
                                            return this.cat_items.sort(sortYearDown);
                                        default:
                                            return this.cat_items.sort(sortYearUp);
                                    }
                                default:
                                    return this.cat_items;
                            }
                        },
        
                        filtersRow() {
                            return Object.entries(this.filter).reduce((rowArray, filter) => {
                                // Определяем имя(ена) активного(ых) фильтра(ов) и возвращаем соответствующие объекты
                                const filterName = filter[0]
                                const filterVal = filter[1]
        
                                if (filterName === 'period') {
                                    if (filterVal.length) {
                                        rowArray.push({
                                            name: filterName,
                                            val: this.getPeriod('filtersRow')
                                        })
                                    } else {
                                        $('select[data-filter-period="start-year"]').val(function () {
                                            return $(this).find('option').first().val();
                                        }).selectpicker('refresh');
                                        $('select[data-filter-period="start-month"]').val(function () {
                                            return $(this).find('option').first().val();
                                        }).selectpicker('refresh');
                                        $('select[data-filter-period="finish-year"]').val(function () {
                                            return $(this).find('option').last().val();
                                        }).selectpicker('refresh');
                                        $('select[data-filter-period="finish-month"]').val(function () {
                                            return $(this).find('option').last().val();
                                        }).selectpicker('refresh');
                                    }
                                } else if (typeof filterVal == "string" && filterVal.length) {
                                    if (filterName !== 'page') {
                                        rowArray.push({
                                            name: filterName,
                                            val: filterVal
                                        })
                                    }
                                } else if (typeof filterVal == "object") {
                                    if (filterVal.length) {
                                        let filterEntries = filterVal.map((val) => {
                                            return {name: filterName, val: val}
                                        });
                                        rowArray = rowArray.concat(filterEntries)
                                    }
                                }
        
                                return rowArray;
                            }, [])
                        },
                    },
        
                    methods: {
                        sort: function (event) {
                            const direction = !$(event.target).hasClass('up') ? 'up' : 'down';
                            const order = direction === 'up' ? 'asc' : 'desc';
        
                            $(event.target).removeClass('up').removeClass('down');
                            $(event.target).addClass(direction);
        
                            let urlParams = new URLSearchParams(location.search);
        
                            urlParams.delete('sort');
                            urlParams.delete('order');
        
                            urlParams.append('sort', $(event.target).data('tableCol'));
                            urlParams.append('order', order);
                            const querySearch = urlParams.toString();
                            const newUrl = location.pathname + (querySearch.length ? '?' + querySearch : '');
        
                            history.pushState('', '', newUrl);
        
                            this.getStartupList();
                        },
        
                        getAllUrlParams(url) {
                            // извлекаем строку из URL или объекта window
                            let queryString = url ? url.split('?')[1] : window.location.search.slice(1);
                            let urlParams = new URLSearchParams(queryString);
        
                            // объект для хранения параметров
                            let obj = {};
                            for (let param of urlParams.entries()) {
                                obj[param[0].toLowerCase()] = param[1].toLowerCase();
                            }
                            return obj;
                        },
        
                        getStartupList: function () {
                            let self = this;
                            let requestData = self.getAllUrlParams(location.search);
        
                            $.get(location.pathname + 'ajax/', requestData).done((responseData) => {
                                self.cat_items = responseData.startups;
                                $('.cat-pagination').html(responseData.pages);
                                $('#total-count').html(responseData.totalCount);
                                $('#total-amount').html(responseData.totalAmount);
                            }).always(() => {
                                self.isLoading = false
                            });
                        },
        
                        removeFilter(filterObj) {
                            // fi - filter item
                            let fi = this.filter[filterObj.name]
                            let $select
        
                            if (filterObj.name === 'period') {
                                $select = $('.selectpicker[data-filter-period]');
                                this.$set(this.filter, 'period', '');
                                if (typeof (barChartGlobal) != 'undefined') {
                                    barChartGlobal.options.annotation.annotations = [{}];
                                    barChartGlobal.update();
                                }
                            } else {
                                $select = $('.selectpicker[data-filter="' + filterObj.name + '"]')
        
                                if (typeof fi == 'string') {
                                    this.filter[filterObj.name] = ''
                                    $select.selectpicker('val', '')
                                } else if (typeof fi == 'object') {
                                    let idx = fi.findIndex(el => el === filterObj.val);
                                    if (idx >= 0) fi.splice(idx, 1)
                                    $select.selectpicker('val', fi)
                                }
                            }
                            this.doFilterItems($select[0])
                        },
        
                        getPeriod: function (type) {
                            let startYear = $('select[data-filter-period="start-year"]').val();
                            let startMonth = $('select[data-filter-period="start-month"]').val();
                            let finishYear = $('select[data-filter-period="finish-year"]').val();
                            let finishMonth = $('select[data-filter-period="finish-month"]').val();
        
                            return type === 'filtersRow'
                                ? 'от ' + startMonth + '/' + startYear + ' до ' + finishMonth + '/' + finishYear
                                : startYear + '-' + startMonth + '|' + finishYear + '-' + finishMonth;
                        },
        
                        doFilterItems: function (event) {
                            let self = this;
                            let $select = event.target !== undefined ? $(event.target) : $(event);
        
                            if (event.target) {
                                if (typeof $select.attr('data-filter') !== 'undefined') {
                                    self.$set(self.filter, $select.attr('data-filter'), $select.val());
                                } else if (typeof $select.attr('data-filter-period') !== 'undefined') {
                                    self.$set(self.filter, 'period', this.getPeriod());
                                }
                            }
        
                            let urlParams = new URLSearchParams(location.search);
                            if ($select.attr('data-filter')) {
                                if ($select.val().length > 0) {
                                    urlParams.set($select.attr('data-filter'), $select.val().join(','));
                                    $select.addClass('active').parent().addClass('active');
                                } else {
                                    urlParams.delete($select.attr('data-filter'));
                                    $select.removeClass('active').parent().removeClass('active')
                                }
                            } else if (typeof $select.attr('data-filter-period') !== 'undefined') {
                                if (this.filter['period']) {
                                    urlParams.set('period', this.getPeriod());
                                    $select.closest(".date-btn").addClass('active')
                                } else {
                                    urlParams.delete('period');
                                    $select.closest(".date-btn").removeClass('active')
                                }
                            } else if ($select.data('page')) {
                                urlParams.set('page', $select.data('page'));
                            }
        
                            // Параметр page будет всегда последний
                            if (self.filter.page) {
                                urlParams.delete('page');
                                urlParams.append('page', self.filter.page);
                            }
        
                            let querySearch = urlParams.toString();
                            let newUrl = location.pathname + (querySearch.length ? '?' + querySearch : '');
        
                            history.pushState('', '', newUrl);
        
                            self.setUrlToSwitcherButtons();
        
                            self.isLoading = true;
        
                            this.getStartupList();
                        },
        
                        setUrlToSwitcherButtons: function () {
                            let urlParams = new URLSearchParams(location.search);
        
                            urlParams.delete('page');
                            urlParams.delete('exits');
        
                            querySearch = urlParams.toString();
                            newUrl = location.pathname + (querySearch.length ? '?' + querySearch : '');
                            $('#switch-to-deals').attr('href', newUrl);
        
                            urlParams.append('exits', 1);
                            querySearch = urlParams.toString();
                            newUrl = location.pathname + (querySearch.length ? '?' + querySearch : '');
                            $('#switch-to-exits').attr('href', newUrl);
                        }
                    },
        
                    mounted: function () {
                        let self = this;
        
                        let searchParams = new URLSearchParams(location.search);
                        for (let [key, val] of searchParams.entries()) {
                            if (val && key !== 'page') {
                                let $select = $('select[data-filter="' + key + '"]');
                                if ($select.prop('multiple')) {
                                    this.$set(this.filter, key, val.split(','));
                                }
                            } else {
                                this.$set(this.filter, key, val);
                            }
                        }
        
                        if (searchParams.get('period')) {
                            this.$set(this.filter, 'period', searchParams.get('period'));
                        }
        
                        if (searchParams.get('exits') === '1') {
                            $('.rounds').addClass('d-none');
                        }
        
                        this.getStartupList();
        
                        $("[data-deals-button-row] .selectpicker").on('change', function (e) {
                            self.doFilterItems(e)
                        });
        
                        $('#catalog-app').on('click', 'a[data-page]', function (e) {
                            e.preventDefault();
                            self.$set(self.filter, 'page', $(this).data('page'));
                            self.doFilterItems(e);
                        });
        
                        $('.item-column input').on("click", function () {
                            var chk = $('.item-column').find('input[type=checkbox]:checked').length;
                            if (chk > 5) {
                                $("#doublescroll").addClass("more-columns");
                                $(".catalog-title").addClass("add-more-columns");
                                $(".catalog-item").addClass("add-more-columns");
                            } else {
                                $("#doublescroll").removeClass("more-columns");
                                $(".catalog-title").removeClass("add-more-columns");
                                $(".catalog-item").removeClass("add-more-columns");
                            }
                        });
        
                        $('.filter-btn').on('click', function () {
                            $('.add-columns').toggleClass('active');
                        });
        
                        self.setUrlToSwitcherButtons();
                    }
                });
            });
            var sortYearDown = function (d1, d2) {
                return (d1.year.toLowerCase() > d2.year.toLowerCase()) ? 1 : -1;
            };
            var sortYearUp = function (d1, d2) {
                return (d1.year.toLowerCase() < d2.year.toLowerCase()) ? 1 : -1;
            };
        </script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
    </body>

</html>
